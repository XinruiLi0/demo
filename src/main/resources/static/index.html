<!DOCTYPE HTML>
<html>
<head>
    <title>Getting Started: Serving Web Content</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
    <h1>Address Book</h1>
    <h2>Please select a action:</h2>
    <h3>Buddy Information Search</h3>
    <p>Please enter a name:</p>
    <input type="text" id="searchName" name="name" />
    <button type="button" onclick="search()">Search</button>
    <p> </p>
    <h3>Buddy Information Delete</h3>
    <p>Please enter the id:</p>
    <input type="number" id="deleteID" name="id" />
    <button type="button" onclick="_delete()">Delete</button>
    <p> </p>
    <h3>Buddy Information Add</h3>
    <p>Please enter the name, phone number, and age:</p>
    <p>Name: <input type="text" id="addName" name="name" /></p>
    <p>Phone Number: <input type="number" id="addPhoneNumber" name="phone number" /></p>
    <p>Age: <input type="number" id="addAge" name="age" /></p>
    <button type="button" onclick="_add()">Add</button>
    <script type="text/javascript">
        function search() {
            var name = document.getElementById("searchName").value;
            var request = new XMLHttpRequest();
            request.open("GET", "/BuddyInfo/search/findByName?name=" + name);
            request.setRequestHeader('Content-Type', 'application/json');
            request.send();
            request.onload = function() {
                if(request.status == 200) {
                    alert(request.responseText);
                } else {
                    alert("Search request failed");
                }
            }
        }

        function _delete() {
            var id = document.getElementById("deleteID").value;
            var request = new XMLHttpRequest();
            request.open("DELETE", "/BuddyInfo/" + id);
            request.setRequestHeader('Content-Type', 'application/json');
            request.send();
            request.onload = function() {
                if(request.status == 204) {
                    alert("Delete success");
                } else {
                    alert("Delete request failed");
                }
            }
        }

        function _add() {
            var name = document.getElementById("addName").value;
            var phoneNumber = document.getElementById("addPhoneNumber").value;
            var age = document.getElementById("addAge").value;
            var data = {};
            data.name = name;
            data.phoneNumber = phoneNumber;
            data.age = age;
            var request = new XMLHttpRequest();
            request.open("POST", "/BuddyInfo");
            request.setRequestHeader('Content-Type', 'application/json');
            request.send(JSON.stringify(data));
            request.onload = function() {
                if(request.status == 201) {
                    alert(request.responseText);
                } else {
                    alert("Add request failed");
                }
            }
        }
    </script>
</body>
</html>